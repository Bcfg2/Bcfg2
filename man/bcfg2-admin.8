.TH "BCFG2-ADMIN" "8" "April 06, 2014" "1.3" "Bcfg2"
.SH NAME
bcfg2-admin \- Perform repository administration tasks
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.\" Man page generated from reStructuredText.
.
.SH SYNOPSIS
.sp
\fBbcfg2\-admin\fP [\-C \fIconfigfile\fP] \fImode\fP [\fImode args\fP] [\fImode options\fP]
.SH DESCRIPTION
.sp
\fBbcfg2\-admin\fP is used to perform Bcfg2 repository
administration.
.SH OPTIONS
.INDENT 0.0
.TP
.BI \-C \ configfile
Specify alternate bcfg2.conf location.
.TP
.BI \-E \ encoding
Specify the encoding of config files.
.TP
.BI \-Q \ path
Specify the path to the server repository.
.TP
.BI \-S \ server
Manually specify the server location (as opposed to
using the value in bcfg2.conf). This should be in
the format "\fI\%https://server:port\fP"
.TP
.B \-d
Enable debugging output.
.TP
.B \-h
Print usage information.
.TP
.BI \-o \ logfile
Writes a log to the specified path.
.TP
.BI \-\-ssl\-key\fB= key
Specify the path to the SSL key.
.TP
.B \-v
Enable verbose output.
.TP
.BI \-x \ password
Use \(aqpassword\(aq for client communication.
.UNINDENT
.SH MODES
.INDENT 0.0
.TP
.B backup
Create an archive of the entire Bcfg2 repository.
.TP
.B client \fIaction\fP \fIclient\fP [attribute=value]
Add, edit, or remove clients entries in metadata (See CLIENT OPTIONS
below).
.TP
.B compare \fIold\fP \fInew\fP
Compare two client configurations. Can be used to verify consistent
behavior between releases. Determine differences between files or
directories (See COMPARE OPTIONS below).
.TP
.B dbshell
Call the Django \(aqdbshell\(aq command on the configured database.
.TP
.B init
Initialize a new repository (interactive).
.TP
.B initreports
Initialize the Reporting database.
.TP
.B minestruct \fIclient\fP [\-f xml\-file] [\-g groups]
Build structure entries based on client statistics extra entries
(See MINESTRUCT OPTIONS below).
.TP
.B perf
Query server for performance data.
.TP
.B pull \fIclient\fP \fIentry\-type\fP \fIentry\-name\fP
Install configuration information into repo based on client bad
entries (See PULL OPTIONS below).
.TP
.B purgereports
Purge historic and expired data from the Reporting database
.TP
.B reportssqlall
Call the Django \(aqshell\(aq command on the Reporting database.
.TP
.B reportsstats
Print Reporting database statistics.
.TP
.B scrubreports
Scrub the Reporting database for duplicate reasons and orphaned
entries.
.TP
.B shell
Call the Django \(aqshell\(aq command on the configured database.
.TP
.B syncdb
Sync the Django ORM with the configured database.
.TP
.B tidy
Remove unused files from repository.
.TP
.B updatereports
Apply database schema updates to the Reporting database.
.TP
.B validatedb
Call the Django \(aqvalidate\(aq command on the configured database.
.TP
.B viz [\-H] [\-b] [\-k] [\-o png\-file]
Create a graphviz diagram of client, group and bundle information
(See VIZ OPTIONS below).
.TP
.B xcmd
Provides a XML\-RPC Command Interface to the bcfg2\-server.
.UNINDENT
.SS CLIENT OPTIONS
.INDENT 0.0
.TP
.B mode
One of the following.
.INDENT 7.0
.TP
.B \fIadd\fP
Add a client
.TP
.B \fIdel\fP
Delete a client
.TP
.B \fIlist\fP
List all client entries
.UNINDENT
.TP
.B client
Specify the client\(aqs name.
.TP
.B attribute=value
Set attribute values when adding a new client. Allowed attributes
are \(aqprofile\(aq, \(aquuid\(aq, \(aqpassword\(aq, \(aqlocation\(aq, \(aqsecure, and
\(aqaddress\(aq.
.UNINDENT
.SS COMPARE OPTIONS
.INDENT 0.0
.TP
.B \-d \fIN\fP, \-\-diff\-lines \fIN\fP
Show only N lines of a diff
.UNINDENT
.INDENT 0.0
.TP
.B \-c,  \-\-color
Show colors even if not ryn from a TTY
.TP
.B \-q,  \-\-quiet
Only show that entries differ, not how they differ
.UNINDENT
.INDENT 0.0
.TP
.B old
Specify the location of the old configuration(s).
.TP
.B new
Specify the location of the new configuration(s).
.UNINDENT
.SS MINESTRUCT OPTIONS
.INDENT 0.0
.TP
.B client
Client whose metadata is to be searched for extra entries.
.TP
.B \-g \fIgroups\fP
Hierarchy of groups in which to place the extra entries in.
.TP
.B \-f \fIoutputfile\fP
Specify the xml file in which to write the extra entries.
.UNINDENT
.SS PULL OPTIONS
.INDENT 0.0
.TP
.B client
Specify the name of the client to search for.
.TP
.B entry type
Specify the type of the entry to pull.
.TP
.B entry name
Specify the name of the entry to pull.
.UNINDENT
.SS VIZ OPTIONS
.INDENT 0.0
.TP
.B \-H,  \-\-includehosts
Include hosts in diagram.
.TP
.B \-b,  \-\-includebundles
Include bundles in diagram.
.UNINDENT
.INDENT 0.0
.TP
.B \-o \fIoutfile\fP, \-\-outfile \fIoutfile\fP
Write to outfile file instead of stdout.
.UNINDENT
.INDENT 0.0
.TP
.B \-k,  \-\-includekey
Add a shape/color key.
.UNINDENT
.INDENT 0.0
.TP
.B \-c \fIhostname\fP, \-\-only\-client \fIhostname\fP
Only show groups and bundles for the named client
.UNINDENT
.SH SEE ALSO
.sp
\fIbcfg2\-info(8)\fP, \fIbcfg2\-server(8)\fP
.\" Generated by docutils manpage writer.
.
